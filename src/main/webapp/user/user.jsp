<%@page language="java" contentType="text/html; charset=utf-8" isELIgnored="false" pageEncoding="utf-8"%><script type="text/javascript">    $(function(){        $('#user').edatagrid({            title:'用户信息',            fitColumns:true,            striped:true,            remoteSort:false,            singleSelect:true,            nowrap:false,            toolbar:'#user_dlg_toolbar',            singleSelect:false,            ctrlSelect:true,            fitColumns:true,            pagination:true,//分页            pageSize:10,            pageList:[10,15,30],            url:'${pageContext.request.contextPath}/user/queryall',            updateUrl: "${pageContext.request.contextPath}/user/update",            saveUrl:"${pageContext.request.contextPath}/user/update",            columns:[[                {field:'id',title:'用户 ID',width:30,checkbox:true},                {                    field:'head_pic',                    title:'头像',                    width:30,                    align:'center',                    formatter: function(value,row,index){                        return "<img src='http://localhost:9001/"+row.head_pic+"' style='width:50px;border-radius:50%;'/>";                    }                },                {field:'username',title:'姓名',width:30,sortable:true,},                 {field:'faname',title:'法号',width:30,sortable:true,},                 {field:'email',title:'邮箱',width:35,sortable:true,},                 {field:'tel',title:'电话',width:30,sortable:true,},                 {field:'sex',title:'性别',width:30,sortable:true,},                 {field:'sign',title:'签名',width:50,sortable:true,},                 {field:'userstatus',title:'状态',width:30,sortable:true,editor:'text'},                 {field:'teacher_id',title:'上师id',width:30,sortable:true,},                 {field:'province',title:'省份',width:30,sortable:true,},                 {field:'city',title:'城市',width:30,sortable:true,},                 {field:'regtime',title:'注册时间',width:30,align:'center',formatter : function(value){                    var date = new Date(value);                    var y = date.getFullYear();                    var m = date.getMonth() + 1;                    var d = date.getDate();                    return y + '-' +m + '-' + d;                }}            ]],        });    });    $("#btn_in").linkbutton({        onClick:function(){            $("#import_dialog").dialog("open")        }    });    $("#btn_out").linkbutton({        onClick:function(){            $("#custom_dialog").dialog("open")        }    });    $("#btnu_update").linkbutton({        onClick:function () {            /*将选中行变为可编辑*/            var row = $("#user").edatagrid("getSelected");            if (row == null) {                alert("请选中行");            } else {                $("#user").edatagrid("editRow", $("#user").edatagrid("getRowIndex", row))            }        }    });    $("#btnu_save").linkbutton({        onClick:function () {            $("#user").edatagrid("saveRow");        }    });    $("#btn").click(function () {//   提交form表单        var titles = $("#customer_cc").combotree("getText");        var value = $("#customer_cc").combotree("getValues");        var c = "";        $.each(value, function (index, title) {            if (index != value.length - 1) {                c += title + ",";            } else {                c += title;            }        })        $('#customer_form').form('submit', {            queryParams: {"titles": titles, "fileds": c},            url:"${pageContext.request.contextPath}/user/customerExport.do"        });    })    $("#import_btn").click(function () {    //提交form表单        $('#import_form').form('submit', {            url:"${pageContext.request.contextPath}/user/import"        });        $("#import_dialog").dialog("close");        $("#user").edatagrid("reload");    })</script><table id="user"></table><div id="user_dlg_toolbar">        <table cellpadding="0" cellspacing="0" style="width:100%">            <tr>                <td style="padding-left:2px">                    <a id="btn_in" href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-add',plain:true">导入</a>                    <a id="btn_out" href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-remove',plain:true">自定义导出</a>                    <a id="btnu_update" href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-edit',plain:true">修改</a>                    <a id="btnu_save" href="javascript:void(0)"   class="easyui-linkbutton" data-options="iconCls:'icon-save',plain:true">保存</a>                </td>            </tr>        </table> </div><div id="custom_dialog" class="easyui-dialog" title="导出数据" style="width:400px;height:200px;"     data-options="iconCls:'icon-save',resizable:true,modal:true,closed:true">    <form id="customer_form" method="get">        <select id="customer_cc" class="easyui-combotree" style="width:200px;"                data-options="url:'${pageContext.request.contextPath}/user/querysx',required:true,checkbox:true,onlyLeafCheck:true,multiple:true"></select>    </form>    <a id="btn" href="#" class="easyui-linkbutton" data-options="iconCls:'icon-ok'">确定导出</a></div><div id="import_dialog" class="easyui-dialog" title="导入数据" style="width:400px;height:200px;"     data-options="iconCls:'icon-save',resizable:true,modal:true,closed:true">    <form id="import_form" method="post" enctype="multipart/form-data">        <label>选择EXCEL文件</label>        <input class="easyui-filebox"  name="file"/>    </form>    <a id="import_btn" href="#" class="easyui-linkbutton" data-options="iconCls:'icon-ok'">确定导入</a></div>