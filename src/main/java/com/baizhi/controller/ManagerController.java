package com.baizhi.controller;import com.baizhi.entity.Manager;import com.baizhi.service.ManagerService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpSession;/** * Created by dell on 2018/5/25. */@Controller@RequestMapping(value = "/mymanager")public class ManagerController {    @Autowired    private ManagerService managerService;    @RequestMapping(value="/login")    public String login(String username,String password,String enCode,HttpServletRequest request){        String kaptchaExpected = (String) request.getSession().getAttribute(com.google.code.kaptcha.Constants.KAPTCHA_SESSION_KEY);        if(!kaptchaExpected.equals(enCode)){            request.getSession().setAttribute("loginstatus","验证码输入错误");            return "redirect:/login.jsp";        }        Manager manager=managerService.login(username);        if(manager==null) {            request.getSession().setAttribute("loginstatus","用户名不存在");            return "redirect:/login.jsp";        }        if(!manager.getPassword().equals(password)){            request.getSession().setAttribute("loginstatus","密码输入错误");            return "redirect:/login.jsp";        }        request.getSession().setAttribute("managerusername",manager.getName());        request.getSession().setAttribute("manager",manager);        return "redirect:/main/main.jsp";    }    @RequestMapping(value="/changepass")    public void ChangePass(String password,String password1,String password2,HttpServletRequest request){        Manager manager= (Manager) request.getSession().getAttribute("manager");        manager.setId(manager.getId());        manager.setPassword(password1);        System.out.println(manager+"=====--======");        managerService.changepassword(manager);    }    @RequestMapping(value="/safeout")    public String SafeOut(HttpSession httpSession){        httpSession.removeAttribute("manager");        return "redirect:/login.jsp";    }}